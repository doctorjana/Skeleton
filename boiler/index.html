<!DOCTYPE html>
<html>
<head>
<title>3d Skeleton</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="3d Skeleton" content="https://docjana.com">
<style type="text/css">
body {
    background-color: #000;
    font-family: courier;
    margin: 0;
    overflow: hidden;
}
#title {
    position: absolute;
    left: 0px;
    width: 100%;
    top: 8px;
    text-align: center;
    z-index: 10;
    font-size: 1.5em;
    color: #0f0;
    pointer-events:none;
}
</style>
<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r74/three.min.js"></script>

<script type="text/javascript" src="js/Detector.js"></script>
<script type="text/javascript" src="js/TrackballControls.js"></script>
<script type="text/javascript" src="js/dat.gui.min.js"></script>
        <script src="ctm.js"></script>
        <script src="CTMLoader.js"></script>
        <script src="lzma.js"></script>


<script type="text/javascript">
var camera, scene, renderer;
var rs;
var mesh;
var mesh_scale = 0.999;
var controls;
var auto_spin = true;
var spin_speed = 1.0;
var translucent = false;
var color = 0x337873;

document.addEventListener("DOMContentLoaded", start_app, false);

function start_app() {
    init();
    animate();
}

function init() {

    if (!Detector.webgl) {
        Detector.addGetWebGLMessage();
    }

    renderer = new THREE.WebGLRenderer({
        antialias: true
    });
    renderer.setClearColor(0x000000, 1.0);
    renderer.setSize(window.innerWidth, window.innerHeight);
    document.body.appendChild(renderer.domElement);

    scene = new THREE.Scene();

    camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 10, 10000);
    camera.position.z = 600;

//light Setup
    var ambient = new THREE.AmbientLight( 0x101030 );
    scene.add( ambient );

    var directionalLight = new THREE.DirectionalLight( 0xCABA7B );
    directionalLight.position.set( 0, 0, .1 );
    scene.add( directionalLight );

    var directionalLight = new THREE.DirectionalLight( 0xCABA7B );
    directionalLight.position.set( 0, 0, -1 );
    scene.add( directionalLight );   


    var dirLight = new THREE.DirectionalLight(0xffffff, 0.5);
    dirLight.position.set(100, 100, 50);
    scene.add(dirLight);

//load models
    var loader = new THREE.CTMLoader();
    loader.load( 'skeleton.ctm',  function( geometry, material ){
    // create mesh and position it
    var material = new THREE.MeshPhongMaterial({ color: 0xFFEC9F, shininess: 15 }),
    mesh = new THREE.Mesh( geometry, material );
    scene.add( mesh ); 
        mesh.name = "skull";
    }, {} );

//controls
    controls = new THREE.TrackballControls(camera, renderer.domElement);
    controls.rotateSpeed = 0.4;
    controls.noZoom = false;
    controls.noPan = false;
    controls.staticMoving = false;
    controls.minDistance = 50;
    controls.maxDistance = 2000;
    controls.dynamicDampingFactor = 0.2;
//GUI
                var gui = new dat.GUI();
            gui.add(this, 'auto_spin', true).name("Welcome to Interactive Skeleton 3d");
            gui.add(this, 'spin_speed', -1.2, 1.2).name("Spin Speed");
            gui.add(this, 'translucent', true).name("Translucent").onChange(function (value) {
                if (value)
                    mesh.material.opacity = 0.5;
                else
                    mesh.material.opacity = 1.0;
            });
            gui.addColor(this, 'color').name("Object Color").onChange(function (value) {
                mesh.material.color.setHex(value);
            });
    

    window.addEventListener('resize', onWindowResize, false);
}

function onWindowResize() {
    camera.aspect = window.innerWidth / window.innerHeight;
    camera.updateProjectionMatrix();
    renderer.setSize(window.innerWidth, window.innerHeight);
}

function animate() {


    requestAnimationFrame(animate);


    controls.update();

    renderer.render(scene, camera);



}
</script>
</head>
<body>
</body>
</html>
